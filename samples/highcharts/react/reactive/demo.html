
            <!---
                DO NOT EDIT: file is generated by the prepare-react-samples gulp task
            --->

            <script type="importmap">
            {
                "imports": {
                    "react": "https://esm.sh/react",
                    "react-dom": "https://esm.sh/react-dom/client",
                    "highcharts/": "https://code.highcharts.com/",
                    "@highcharts/react": "https://esm.sh/@highcharts/react@next/index.js",
                    "@highcharts/react/": "https://esm.sh/@highcharts/react@next/"
                }
            }
            </script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/a11y-light.min.css">
            <figure class="highcharts-figure">
                    <div id="container"></div>
            </figure><style>
#container {
    min-height: 400px;
}

details {
    border-radius: 8px;
    overflow: hidden;
    margin: 20px auto;

    >pre {
        padding: 12px 16px;
        margin: 0;
        font-size: 0.95em;
        color: #333;
        line-height: 1.6;
    }

    summary {
        background-color: #545ecc;
        color: white;
        font-weight: bold;
        font-family: sans-serif;
        padding: 12px 16px;
        cursor: pointer;
        border: none;
        outline: none;
        user-select: none;

        &:focus {
            border: 3px dashed yellow;
        }
    }
}
</style><details><summary>Code</summary><pre><code><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Chart</span>, <span class="hljs-title class_">Series</span>, <span class="hljs-title class_">XAxis</span>, <span class="hljs-title class_">Title</span>, setHighcharts } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Accessibility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/options/Accessibility&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WordcloudSeries</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/series/Wordcloud&#x27;</span>;

<span class="hljs-comment">// Note: These imports are not necessary when using a build tool such as Vite</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;highcharts/esm/modules/wordcloud.src.js&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">HC</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;highcharts/esm/modules/accessibility.src.js&#x27;</span>
<span class="hljs-title function_">setHighcharts</span>(<span class="hljs-variable constant_">HC</span>)

<span class="hljs-keyword">const</span> defaultText =
    <span class="hljs-string">`Charts are an essential tool for visualizing data, making complex information more accessible and understandable. They come in various forms, including bar charts, line charts, pie charts, and scatter plots, each serving different purposes. A well-designed chart can highlight trends, compare data points, and reveal patterns that might not be obvious in raw numbers. Modern libraries like Highcharts provide powerful tools for creating interactive and dynamic charts in web applications. Whether for business analytics, scientific research, or financial reports, charts help turn data into actionable insights.
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">removePunctuation</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.,\/#!$%\^&amp;\*;:{}=\-_`~()]/g</span>, <span class="hljs-string">&#x27;&#x27;</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOccuranceOfWords</span>(<span class="hljs-params">words</span>) {
    <span class="hljs-keyword">const</span> wordsArray = <span class="hljs-title function_">removePunctuation</span>(words).<span class="hljs-title function_">toLowerCase</span>()
        .<span class="hljs-title function_">replaceAll</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">&#x27; &#x27;</span>)
        .<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27; &#x27;</span>);

    <span class="hljs-keyword">const</span> wordCount = {};
    wordsArray.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> {
        wordCount[word] = (wordCount[word] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
    });

    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(wordCount).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> ({ <span class="hljs-attr">name</span>: word, <span class="hljs-attr">weight</span>: wordCount[word] }));

    <span class="hljs-comment">// Sort and limit</span>
    data.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">weight</span> - a.<span class="hljs-property">weight</span>);
    data.<span class="hljs-property">length</span> = <span class="hljs-number">40</span>;

    <span class="hljs-keyword">return</span> data;
}

<span class="hljs-keyword">const</span> textSources = {
    <span class="hljs-string">&#x27;Highcharts&#x27;</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Highcharts&#x27;</span>,
    <span class="hljs-string">&#x27;Tag cloud&#x27;</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Tag_cloud&#x27;</span>,
    <span class="hljs-string">&#x27;Visualisation&#x27;</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Visualization_(graphics)&#x27;</span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchText</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> titleMatch = url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\/wiki\/([^#]+)/</span>);
    <span class="hljs-keyword">if</span> (!titleMatch || !titleMatch[<span class="hljs-number">1</span>]) {
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> title = <span class="hljs-built_in">decodeURIComponent</span>(titleMatch[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">const</span> apiUrl = <span class="hljs-string">`https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;exintro=true&amp;explaintext=true&amp;titles=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(title)}</span>&amp;origin=*`</span>;

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(apiUrl);
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    <span class="hljs-keyword">const</span> pages = data.<span class="hljs-property">query</span>.<span class="hljs-property">pages</span>;
    <span class="hljs-keyword">const</span> pageKey = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(pages)[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (pageKey === <span class="hljs-string">&quot;-1&quot;</span>) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">return</span> pages[pageKey].<span class="hljs-property">extract</span>;
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">TextInput</span> (<span class="hljs-params">{ content, setContent }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-input-container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setContent(e.target.value)}
        value={content}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">dl</span> <span class="hljs-attr">aria-live</span>=<span class="hljs-string">&quot;polite&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>Word count<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>{removePunctuation(content).split(&#x27; &#x27;).length}<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>Unique words<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>{new Set(removePunctuation(content).split(&#x27; &#x27;)).size}<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">WikiButtons</span> (<span class="hljs-params">{ textSources, content, setContent }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;wiki-container&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;wiki-title&quot;</span>&gt;</span>Load article from Wikipedia:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;group&quot;</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;button-group&quot;</span>
        <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Wikipedia article selection&quot;</span>
      &gt;</span>
        {Object.entries(textSources).map(([name, url]) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
            <span class="hljs-attr">aria-label</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">Load</span> <span class="hljs-attr">the</span> ${<span class="hljs-attr">name</span>} <span class="hljs-attr">article</span> <span class="hljs-attr">into</span> <span class="hljs-attr">wordcloud</span>`}
            <span class="hljs-attr">aria-pressed</span>=<span class="hljs-string">{content</span> === <span class="hljs-string">textSources[name]}</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{name}</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{async</span> () =&gt;</span> setContent((await fetchText(url)) ?? &#x27;Failed to load article&#x27;)}
          &gt;
            {name}
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ChartComponent</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(defaultText);
    <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-title function_">getOccuranceOfWords</span>(content));

    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> to = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> content == <span class="hljs-string">&#x27;string&#x27;</span>) {
                <span class="hljs-keyword">const</span> newData = <span class="hljs-title function_">getOccuranceOfWords</span>(content)
                <span class="hljs-title function_">setData</span>(newData);
            }
        }, <span class="hljs-number">250</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(to)
    }, [content, setData]);

    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Chart</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Accessibility</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">WordcloudSeries</span>
                    <span class="hljs-attr">rotation</span>=<span class="hljs-string">{{</span>
                        <span class="hljs-attr">to:</span> <span class="hljs-attr">0</span>
                    }}
                    <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
                /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Chart</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span>
                <span class="hljs-attr">content</span>=<span class="hljs-string">{content}</span>
                <span class="hljs-attr">setContent</span>=<span class="hljs-string">{setContent}</span>
            /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">WikiButtons</span>
              <span class="hljs-attr">textSources</span>=<span class="hljs-string">{textSources}</span>
              <span class="hljs-attr">content</span>=<span class="hljs-string">{content}</span>
              <span class="hljs-attr">setContent</span>=<span class="hljs-string">{setContent}</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}

<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#container&#x27;</span>)
)?.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChartComponent</span> /&gt;</span></span>);
</code></pre></details>