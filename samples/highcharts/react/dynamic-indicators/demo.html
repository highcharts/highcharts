
            <!---
                DO NOT EDIT: file is generated by the prepare-react-samples gulp task
            --->

            <script type="importmap">
            {
                "imports": {
                    "react": "https://esm.sh/react@19.1.0",
                    "react-dom": "https://esm.sh/react-dom@19.1.0/client",
                    "react-dom/": "https://esm.sh/react-dom@19.1.0/",
                    "@highcharts/react": "https://unpkg.com/@highcharts/react@next/index.js",
                    "@highcharts/react/": "https://unpkg.com/@highcharts/react@next/",
                    "highcharts/": "https://unpkg.com/highcharts@12.2.0/"
                }
            }
            </script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/a11y-light.min.css">
            <figure class="highcharts-figure">
                    <div id="container"></div>
            </figure><style nonce="highcharts">
#container {
    min-height: 400px;
}

details {
    border-radius: 8px;
    overflow: hidden;
    margin: 20px auto;

    >pre {
        padding: 12px 16px;
        margin: 0;
        font-size: 0.95em;
        color: #333;
        line-height: 1.6;
    }

    summary {
        background-color: #545ecc;
        color: white;
        font-weight: bold;
        font-family: sans-serif;
        padding: 12px 16px;
        cursor: pointer;
        border: none;
        outline: none;
        user-select: none;

        &:focus {
            border: 3px dashed yellow;
        }
    }
}
</style><details><summary>Code</summary><pre><code><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Series</span>, <span class="hljs-title class_">Subtitle</span>, <span class="hljs-title class_">Title</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StockChart</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/Stock&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SMASeries</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/indicators/SMA&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EMASeries</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/indicators/EMA&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PSARSeries</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/indicators/PSAR&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Accessibility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@highcharts/react/options/Accessibility&#x27;</span>;



<span class="hljs-keyword">const</span> priceSeriesId = <span class="hljs-string">&#x27;price-series&#x27;</span>;

<span class="hljs-keyword">const</span> priceData = [
    [<span class="hljs-string">&#x27;2024-01-01&#x27;</span>, <span class="hljs-number">172</span>, <span class="hljs-number">176</span>, <span class="hljs-number">169</span>, <span class="hljs-number">174</span>],
    [<span class="hljs-string">&#x27;2024-01-02&#x27;</span>, <span class="hljs-number">174</span>, <span class="hljs-number">179</span>, <span class="hljs-number">171</span>, <span class="hljs-number">177</span>],
    [<span class="hljs-string">&#x27;2024-01-03&#x27;</span>, <span class="hljs-number">177</span>, <span class="hljs-number">181</span>, <span class="hljs-number">173</span>, <span class="hljs-number">175</span>],
    [<span class="hljs-string">&#x27;2024-01-04&#x27;</span>, <span class="hljs-number">175</span>, <span class="hljs-number">180</span>, <span class="hljs-number">172</span>, <span class="hljs-number">179</span>],
    [<span class="hljs-string">&#x27;2024-01-05&#x27;</span>, <span class="hljs-number">179</span>, <span class="hljs-number">183</span>, <span class="hljs-number">175</span>, <span class="hljs-number">182</span>],
    [<span class="hljs-string">&#x27;2024-01-08&#x27;</span>, <span class="hljs-number">182</span>, <span class="hljs-number">186</span>, <span class="hljs-number">178</span>, <span class="hljs-number">185</span>],
    [<span class="hljs-string">&#x27;2024-01-09&#x27;</span>, <span class="hljs-number">185</span>, <span class="hljs-number">188</span>, <span class="hljs-number">181</span>, <span class="hljs-number">183</span>],
    [<span class="hljs-string">&#x27;2024-01-10&#x27;</span>, <span class="hljs-number">183</span>, <span class="hljs-number">187</span>, <span class="hljs-number">179</span>, <span class="hljs-number">181</span>],
    [<span class="hljs-string">&#x27;2024-01-11&#x27;</span>, <span class="hljs-number">181</span>, <span class="hljs-number">185</span>, <span class="hljs-number">177</span>, <span class="hljs-number">180</span>],
    [<span class="hljs-string">&#x27;2024-01-12&#x27;</span>, <span class="hljs-number">180</span>, <span class="hljs-number">184</span>, <span class="hljs-number">176</span>, <span class="hljs-number">178</span>],
    [<span class="hljs-string">&#x27;2024-01-15&#x27;</span>, <span class="hljs-number">178</span>, <span class="hljs-number">182</span>, <span class="hljs-number">174</span>, <span class="hljs-number">181</span>],
    [<span class="hljs-string">&#x27;2024-01-16&#x27;</span>, <span class="hljs-number">181</span>, <span class="hljs-number">185</span>, <span class="hljs-number">177</span>, <span class="hljs-number">184</span>],
    [<span class="hljs-string">&#x27;2024-01-17&#x27;</span>, <span class="hljs-number">184</span>, <span class="hljs-number">188</span>, <span class="hljs-number">180</span>, <span class="hljs-number">187</span>],
    [<span class="hljs-string">&#x27;2024-01-18&#x27;</span>, <span class="hljs-number">187</span>, <span class="hljs-number">191</span>, <span class="hljs-number">183</span>, <span class="hljs-number">189</span>],
    [<span class="hljs-string">&#x27;2024-01-19&#x27;</span>, <span class="hljs-number">189</span>, <span class="hljs-number">194</span>, <span class="hljs-number">185</span>, <span class="hljs-number">192</span>]
];

<span class="hljs-keyword">const</span> indicatorCatalog = [
    {
        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;sma-14&#x27;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;SMA (14)&#x27;</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;sma&#x27;</span>,
        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#1aadce&#x27;</span>,
        <span class="hljs-attr">params</span>: {
            <span class="hljs-attr">period</span>: <span class="hljs-number">14</span>
        }
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;ema-12&#x27;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;EMA (12)&#x27;</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;ema&#x27;</span>,
        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#f28f43&#x27;</span>,
        <span class="hljs-attr">params</span>: {
            <span class="hljs-attr">period</span>: <span class="hljs-number">12</span>
        }
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;sar&#x27;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Parabolic SAR&#x27;</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;psar&#x27;</span>,
        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#2b908f&#x27;</span>,
        <span class="hljs-attr">params</span>: {
            <span class="hljs-attr">acceleration</span>: <span class="hljs-number">0.03</span>,
            <span class="hljs-attr">maxAcceleration</span>: <span class="hljs-number">0.3</span>
        }
    }
];

<span class="hljs-keyword">const</span> indicatorComponents = {
    <span class="hljs-attr">sma</span>: <span class="hljs-title class_">SMASeries</span>,
    <span class="hljs-attr">ema</span>: <span class="hljs-title class_">EMASeries</span>,
    <span class="hljs-attr">psar</span>: <span class="hljs-title class_">PSARSeries</span>
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">IndicatorControls</span>(<span class="hljs-params">{ activeIndicators, onAddIndicator, onReset }</span>) {
    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;series-controls&quot;</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;group&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Indicator controls&quot;</span>&gt;</span>
            {indicatorCatalog.map(indicator =&gt; {
                const isActive = activeIndicators.some(
                    active =&gt; active.id === indicator.id
                );

                return (
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                        <span class="hljs-attr">key</span>=<span class="hljs-string">{indicator.id}</span>
                        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAddIndicator(indicator)}
                        type=&quot;button&quot;
                        disabled={isActive}
                    &gt;
                        {isActive ? `${indicator.name} added` : `Add ${indicator.name}`}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                );
            })}

            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">disabled</span>=<span class="hljs-string">{activeIndicators.length</span> === <span class="hljs-string">0}</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onReset}</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span>
            &gt;</span>
                Reset indicators
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ChartComponent</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> [indicatorSeries, setIndicatorSeries] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>([]);

    <span class="hljs-keyword">const</span> addIndicator = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function"><span class="hljs-params">indicator</span> =&gt;</span> {
        <span class="hljs-title function_">setIndicatorSeries</span>(<span class="hljs-function"><span class="hljs-params">current</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (current.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> entry.<span class="hljs-property">id</span> === indicator.<span class="hljs-property">id</span>)) {
                <span class="hljs-keyword">return</span> current;
            }

            <span class="hljs-keyword">return</span> [
                ...current,
                {
                    ...indicator,
                    <span class="hljs-attr">zIndex</span>: <span class="hljs-number">3</span>
                }
            ];
        });
    }, []);

    <span class="hljs-keyword">const</span> resetIndicators = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setIndicatorSeries</span>([]);
    }, []);

    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;dynamic-series-demo&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">StockChart</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Title</span>&gt;</span>Dynamic stock indicators<span class="hljs-tag">&lt;/<span class="hljs-name">Title</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Subtitle</span>&gt;</span>Add technical indicator series at runtime<span class="hljs-tag">&lt;/<span class="hljs-name">Subtitle</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">Accessibility</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">Series</span>
                    <span class="hljs-attr">id</span>=<span class="hljs-string">{priceSeriesId}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Demo stock&quot;</span>
                    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;candlestick&quot;</span>
                    <span class="hljs-attr">data</span>=<span class="hljs-string">{priceData}</span>
                    <span class="hljs-attr">zIndex</span>=<span class="hljs-string">{2}</span>
                /&gt;</span>

                {indicatorSeries.map(indicator =&gt; {
                    const IndicatorComponent = indicatorComponents[indicator.type];

                    if (!IndicatorComponent) {
                        return null;
                    }

                    const options = {
                        linkedTo: priceSeriesId,
                        id: indicator.id,
                        name: indicator.name,
                        color: indicator.color,
                        params: indicator.params,
                        zIndex: indicator.zIndex,
                    };

                    return (
                        <span class="hljs-tag">&lt;<span class="hljs-name">IndicatorComponent</span>
                            <span class="hljs-attr">key</span>=<span class="hljs-string">{indicator.id}</span>
                            <span class="hljs-attr">options</span>=<span class="hljs-string">{options}</span>
                        /&gt;</span>
                    );
                })}

            <span class="hljs-tag">&lt;/<span class="hljs-name">StockChart</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">IndicatorControls</span>
                <span class="hljs-attr">activeIndicators</span>=<span class="hljs-string">{indicatorSeries}</span>
                <span class="hljs-attr">onAddIndicator</span>=<span class="hljs-string">{addIndicator}</span>
                <span class="hljs-attr">onReset</span>=<span class="hljs-string">{resetIndicators}</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}

<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#container&#x27;</span>)
)?.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChartComponent</span> /&gt;</span></span>);
</code></pre></details>