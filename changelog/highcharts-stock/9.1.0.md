# Changelog for Highcharts Stock v9.1.0 (2021-05-04)

- Most changes listed under Highcharts 9.1.0 above also apply to Highcharts Stock 9.1.0.
- Added new feature, [series.dataGrouping.anchor](https://api.highcharts.com/highstock/series.dataGrouping.anchor), for controlling where grouped points are rendered within the group. See #12455. [<a href="https://github.com/highcharts/highcharts/pull/15428">Edit</a>]
- Added new technical indicator, Disparity Index. See #15139. [<a href="https://github.com/highcharts/highcharts/pull/15394">Edit</a>]
- Added new technical indicator, Directional Movement Index (DMI). See #15140. [<a href="https://github.com/highcharts/highcharts/pull/15287">Edit</a>]
- Added new technical indicator, Chande Momentum Oscillator (CMO). See #15142. [<a href="https://github.com/highcharts/highcharts/pull/15323">Edit</a>]
- Added new technical indicator, On-Balance Volume (OBV). See #15138. [<a href="https://github.com/highcharts/highcharts/pull/15355">Edit</a>]
- Added `currentPriceIndicator` and [lastPrice](https://api.highcharts.com/highstock/plotOptions.series.lastPrice) for multiple series (also to indicators and volume), see #14888. [<a href="https://github.com/highcharts/highcharts/pull/15195">Edit</a>]
- Added line series as available type for the RSI Indicator. See #14930. [<a href="https://github.com/highcharts/highcharts/pull/15071">Edit</a>]

## Upgrade notes
- The data grouping [smoothed](https://api.highcharts.com/highstock/plotOptions.series.dataGrouping.smoothed) property has been deprecated and has been changed to `firstAnchor`, `anchor` and `lastAnchor`.
- The default value of [linearregression.params.xAxisUnit](https://api.highcharts.com/highstock/plotOptions.linearregression.params.xAxisUnit) has been changed from `undefined` to `null`.

## Bug fixes
- Fixed #13807, adding a technical indicator in the Stock Tools when multiple axes were predefined would break the chart. [<a href="https://github.com/highcharts/highcharts/pull/15004">Edit</a>]
- Fixed #15218, [scrollbar.liveRedraw](https://api.highcharts.com/highstock/scrollbar.liveRedraw) defaulting to true in modern browsers did not work when scrollbar was set in chart options instead of axis options. [<a href="https://github.com/highcharts/highcharts/pull/15233">Edit</a>]
- Fixed #3825, when [ordinal](https://api.highcharts.com/highstock/xAxis.ordinal) axis and `dataGrouping` were enabled, panning worked unevenly in one direction. [<a href="https://github.com/highcharts/highcharts/pull/15239">Edit</a>]
- Fixed #14192, disabled stock tools GUI buttons when all series were invisible. [<a href="https://github.com/highcharts/highcharts/pull/15226">Edit</a>]
- Fixed #15157, replaced the hex, and string colors in the stock tools with the colors defined in the palette. [<a href="https://github.com/highcharts/highcharts/pull/15425">Edit</a>]
- Fixed #15222, `className` was not applied to [lastPrice](https://api.highcharts.com/highstock/plotOptions.series.lastPrice) crosshair. [<a href="https://github.com/highcharts/highcharts/pull/15236">Edit</a>]
- Fixed #6332, split tooltip didn't work correctly with flag series type with empty text property. [<a href="https://github.com/highcharts/highcharts/pull/15122">Edit</a>]
- Fixed #15512, dynamically added series did not use range selector data grouping. [<a href="https://github.com/highcharts/highcharts/pull/15554">Edit</a>]
- Fixed #13847, data labels in navigator should be disabled in the default configuration. [<a href="https://github.com/highcharts/highcharts/pull/15564">Edit</a>]
- Fixed #15362, corrected API and Stock Tools popup list of indicators' params. [<a href="https://github.com/highcharts/highcharts/pull/15479">Edit</a>]
- Fixed #15435, clipping was sometimes wrong after [update](https://api.highcharts.com/highstock/plotOptions.series.point.events.update) with stock loaded. [<a href="https://github.com/highcharts/highcharts/pull/15516">Edit</a>]
- Fixed #15524, dragging annotation after updating label threw and `labels.overflow` set to `justify` did not work correctly. [<a href="https://github.com/highcharts/highcharts/pull/15529">Edit</a>]
- Fixed #15502, vertical counter annotation did not work. [<a href="https://github.com/highcharts/highcharts/pull/15504">Edit</a>]
- Fixed #15424, fibonacci annotation `lineColor` and [lineColors](https://api.highcharts.com/highstock/annotations.fibonacci.typeOptions.lineColors) options did not work. [<a href="https://github.com/highcharts/highcharts/pull/15430">Edit</a>]
- Fixed #15445, options got mutated when creating stock chart. [<a href="https://github.com/highcharts/highcharts/pull/15451">Edit</a>]
- Fixed #15383, indicators did not recalculate when updating series type. [<a href="https://github.com/highcharts/highcharts/pull/15395">Edit</a>]
- Fixed #15384, updating flag shape did not work. [<a href="https://github.com/highcharts/highcharts/pull/15388">Edit</a>]
- Fixed #15005, point `dataGroup` start was not calculated correctly. [<a href="https://github.com/highcharts/highcharts/pull/15329">Edit</a>]
- Fixed #12116, boosted stacked chart with range selector enabled and a partial range selected threw. [<a href="https://github.com/highcharts/highcharts/pull/15352">Edit</a>]
- Fixed #15324, elements such as legend and title sometimes had the wrong position when using stock tools. [<a href="https://github.com/highcharts/highcharts/pull/15327">Edit</a>]
- Fixed #15178, console warning when using `states` in [rangeSelector.buttonTheme](https://api.highcharts.com/highstock/rangeSelector.buttonTheme) options. [<a href="https://github.com/highcharts/highcharts/pull/15182">Edit</a>]
- Fixed #15170, added `lang` options for indicators parameters in Stock Tools popup. [<a href="https://github.com/highcharts/highcharts/pull/15302">Edit</a>]
- Fixed #8603, dynamically added stock axes missed forced options, addition to #15164. [<a href="https://github.com/highcharts/highcharts/pull/15299">Edit</a>]
- Fixed dynamically added axis defaults in stock, axes dynamically added to stock charts got different defaults than the ones added through the chart constructor. [<a href="https://github.com/highcharts/highcharts/pull/15164">Edit</a>]
- Fixed #15029, improved `currentPriceIndicator` button functionality. [<a href="https://github.com/highcharts/highcharts/pull/15208">Edit</a>]
- Fixed #15060, range selector text input was too short when [inputBoxWidth](https://api.highcharts.com/highstock/rangeSelector.inputBoxWidth) was not set, especially in IE. [<a href="https://github.com/highcharts/highcharts/pull/15279">Edit</a>]
- Fixed #13858, clipping was wrong after plot height had been changed by a responsive rule firing during chart load with stock loaded. [<a href="https://github.com/highcharts/highcharts/pull/15200">Edit</a>]
- Fixed #15075, some Stock Tools annotations were being drawn incorrectly when [yAxis.top](https://api.highcharts.com/highstock/yAxis.top) was set. [<a href="https://github.com/highcharts/highcharts/pull/15215">Edit</a>]
- Fixed #15155, some line drawing tools of the Stock Tools package didn't work correctly. [<a href="https://github.com/highcharts/highcharts/pull/15243">Edit</a>]
- Fixed #15005, when [groupAll](https://api.highcharts.com/highstock/plotOptions.series.dataGrouping.groupAll) was set to true, group start was badly calculated. [<a href="https://github.com/highcharts/highcharts/pull/15174">Edit</a>]
- Fixed #13247, `getTimezoneOffset` got called with `NaN` timestamp when rendering stock chart with at least one empty series. [<a href="https://github.com/highcharts/highcharts/pull/15185">Edit</a>]
- Fixed #15074, [lastPrice](https://api.highcharts.com/highstock/plotOptions.series.lastPrice) color was not applied properly. [<a href="https://github.com/highcharts/highcharts/pull/15137">Edit</a>]
- Fixed #14197, after changing `shortPeriod` in MACD, points were missing. [<a href="https://github.com/highcharts/highcharts/pull/15047">Edit</a>]
- Fixed #14879, `currentPriceIndicator` label was not always visible when navigating the data set. [<a href="https://github.com/highcharts/highcharts/pull/14975">Edit</a>]
- Fixed #9671, updating stock chart axes through `Chart.update` with `oneToOne` set to `true` did not work correctly. [<a href="https://github.com/highcharts/highcharts/pull/15121">Edit</a>]
- Fixed #15128, parts of the series disappeared when redrawing a regular chart with [series.clip](https://api.highcharts.com/highstock/plotOptions.series.clip) set to `false` and stock loaded. [<a href="https://github.com/highcharts/highcharts/pull/15144">Edit</a>]
- Fixed #12100, unable to scroll using mousewheel inside Stock Tools popups when `mapNavigation` was enabled. [<a href="https://github.com/highcharts/highcharts/pull/14999">Edit</a>]
- Fixed #9738, [groupAll](https://api.highcharts.com/highstock/plotOptions.series.dataGrouping.groupAll) did not work correctly with OHLC-based series. [<a href="https://github.com/highcharts/highcharts/pull/15114">Edit</a>]
- Fixed #10296, navigator leaked event handlers into series and x-axis on `Series.update`. [<a href="https://github.com/highcharts/highcharts/pull/15093">Edit</a>]
- Fixed issue mentioned in #15060 and #15062, it was not possible to enter months starting with 1 into the range selector date input under certain conditions. When typing the extremes now only update on blur and when pressing enter, which is the same behaviour the text inputs have. [<a href="https://github.com/highcharts/highcharts/pull/15066">Edit</a>]
- Fixed #11930, removing dynamically added y-axes did not work correctly with `navigator` enabled, causing the removed axis to show in exported charts. [<a href="https://github.com/highcharts/highcharts/pull/15043">Edit</a>]
- Fixed #13876, toggling `currentPriceIndicator` button threw error. [<a href="https://github.com/highcharts/highcharts/pull/15041">Edit</a>]
